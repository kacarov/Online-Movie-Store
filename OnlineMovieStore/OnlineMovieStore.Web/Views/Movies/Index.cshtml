@model MovieSearchViewModel
@{
    ViewData["Title"] = "Index";
}

@{
    var previousDisabled = Model.Page == 1 ? "disabled" : string.Empty;
    var nextDisabled = Model.Page == Model.TotalPages ? "disabled" : string.Empty;
}

<h2>Index</h2>

<form asp-action="Index" asp-controller="Movies" method="GET">
    <div class="row">

        <div class="col-xs-6 col-md-4">

            <div class="input-group">

                <input asp-for="@Model.SearchText" class="form-control" placeholder="Search" id="txtSearch" />

            </div>
        </div>
    </div>
</form>

<div id="example_wrapper" class="dataTables_wrapper form-inline dt-bootstrap">
    <div class="row"><div class="col-sm-6"><div class="dataTables_length" id="example_length"><label>Show <select name="example_length" aria-controls="example" class="form-control input-sm"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div></div><div class="col-sm-6"><div id="example_filter" class="dataTables_filter"></div></div></div><div class="row">
        <div class="col-sm-12">
            <table id="example" class="table table-striped table-bordered dataTable" style="width: 100%;" role="grid" aria-describedby="example_info">
                <thead>
                    <tr role="row"><th class="sorting_asc" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 45px;">Title</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 53px;">Year</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 41px;">Added On</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 26px;">Price</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 50px;">Start date</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 51px;">Salary</th></tr>
                </thead>
                <tbody>
                    @{int count = 1; }
                    @foreach (var movie in Model.Movies)
                    {
                        if (count % 2 == 0)
                        {
                            <tr role="row" class="even">
                                <td class="sorting_1"><a asp-controller="Movies" asp-action="Details" asp-route-title="@movie.Title">@movie.Title</a></td>
                                <td>@movie.Year</td>
                                <td>@movie.CreatedOn</td>
                                <td>@movie.Price$</td>

                            </tr>
                        }
                        else
                        {
                            <tr role="row" class="odd">
                                <td class="sorting_1"><a asp-controller="Movies" asp-action="Details" asp-route-title="@movie.Title">@movie.Title</a></td>
                                <td>@movie.Year</td>
                                <td>@movie.CreatedOn</td>
                                <td>@movie.Price$</td>
                            </tr>
                        }
                    }

                </tbody>
                <tfoot>
                    <tr><th rowspan="1" colspan="1">Name</th><th rowspan="1" colspan="1">Position</th><th rowspan="1" colspan="1">Office</th><th rowspan="1" colspan="1">Age</th><th rowspan="1" colspan="1">Start date</th><th rowspan="1" colspan="1">Salary</th></tr>
                </tfoot>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-5">
            <div class="dataTables_info" id="example_info" role="status" aria-live="polite">Showing @Model.Page to  of @Model.TotalPages entries</div>
        </div>
        <div class="col-sm-7">
            <div class="dataTables_paginate paging_simple_numbers" id="example_paginate">
                <ul class="pagination">
                    <li class="paginate_button @previousDisabled" id="example_previous">
                        <a class="@previousDisabled" asp-controller="Movies" asp-action="Index" asp-route-page="@Model.PreviousPage" asp-route-search="@Model.SearchText">PREVIOUS</a>
                    </li>

                    @for (int i = 1; i <= Model.TotalPages; i++)
                    {
                        <li class="paginate-button">
                            <a class="page-link" href="/Movies/Index/Movies?searchtext=@Model.SearchText&page=@i">@i</a>
                        </li>
                    }

                    <li class="paginate_button next @nextDisabled" id="example_next">
                        <a class="@nextDisabled" asp-controller="Movies" asp-action="Index" asp-route-page="@Model.NextPage" asp-route-search="@Model.SearchText">NEXT</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

